<section id="how-to-buy" class="neo-how-to-buy">
    <div class="my__container">
        <div class="top-content">
            <div class="col-xl-4 col-lg-5 col-md-7 col-sm-8 col-11 mx-auto">
                <div class="text-center">
                    <h2 class="neo-section-title">
                        <span data-char="H">H</span><span data-char="o">o</span><span data-char="w">w</span><span
                            data-char=" ">&nbsp;</span><span data-char="t">t</span><span data-char="o">o</span><span
                            data-char=" ">&nbsp;</span><span data-char="B">B</span><span data-char="u">u</span><span
                            data-char="y">y</span>
                    </h2>
                    <p>Escape the Memetrix and stack $MMXX <br> in just 3 simple steps.</p>
                    <div class="flex justify-center my-[16px]">
                        <a href="#presale-box" class="neo-btn-primary">
                            <span class="framee frame-1"></span>
                            <span class="framee frame-2"></span>
                            <span class="framee frame-3"></span>
                            <span class="framee frame-4"></span>
                            <svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="wallet"
                                class="svg-inline--fa fa-wallet " role="img" xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 512 512">
                                <path fill="currentColor"
                                    d="M88 32C39.4 32 0 71.4 0 120L0 392c0 48.6 39.4 88 88 88l336 0c48.6 0 88-39.4 88-88l0-176c0-48.6-39.4-88-88-88l-304 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l304 0c22.1 0 40 17.9 40 40l0 176c0 22.1-17.9 40-40 40L88 432c-22.1 0-40-17.9-40-40l0-272c0-22.1 17.9-40 40-40l368 0c13.3 0 24-10.7 24-24s-10.7-24-24-24L88 32zM384 336a32 32 0 1 0 0-64 32 32 0 1 0 0 64z">
                                </path>
                            </svg>
                            {% include 'elements/coded-text.html', text: 'buy $MMXX now' %}
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mx-[-22px] mt-[-40px]">
            <div class="col-lg-6 col-xl-4 mt--40">
                <div class="scroll_top_slide"
                    style="transform: translateY(39.0166%); transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);">
                    <div class="neo-step-card step-card-item-1">
                        <div class="card-top">
                            <div class="dot">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                            <span class="icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                                    class="size-6">
                                    <path fill-rule="evenodd"
                                        d="M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z"
                                        clip-rule="evenodd" />
                                </svg>
                            </span>
                        </div>
                        <div class="card-body">
                            <h3 class="card-title">Step 1</h3>
                            <p class="card-des"><span>Connect Wallet <span>Use MetaMask or Trust Wallet.</span></span>
                            </p>
                            <div class="feature-item">
                                <h6 class="feature-title">Network Selection</h6>
                                <p class="feature-dec">→ Choose Ethereum (ETH), Base Chain (ETH L2), or Binance Smart
                                    Chain (BSC).</p>
                            </div>
                            <div class="feature-item">
                                <h6 class="feature-title">Connect Wallet</h6>
                                <p class="feature-dec">Tap “Connect Wallet” on the presale dashboard.</p>
                            </div>
                        </div>
                        <div class="card-bottom card-bottom-1">
                            <img alt="pepe" loading="lazy" width="404" height="207"
                                src="{{'images/step-01.gif' | asset_url }}">
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-6 col-xl-4 mt--40">
                <div class="">
                    <div class="neo-step-card step-card-item-2 active">
                        <div class="card-top">
                            <div class="dot"><span></span><span></span><span></span></div>
                            <span class="icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                                    class="size-6">
                                    <path fill-rule="evenodd"
                                        d="M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z"
                                        clip-rule="evenodd" />
                                </svg>
                            </span>
                        </div>
                        <div class="card-body">
                            <h3 class="card-title">Step 2</h3>
                            <p class="card-des">Choose Token &amp; Amount<!-- --> <span><span>Select ETH, USDT, USDC
                                        (Ethereum/BSC) or BNB (BSC only).</span></span></p>
                            <div class="feature-item">
                                <h6 class="feature-title">Set Your Amount</h6>
                                <p class="feature-dec">Enter your desired amount to view how many $MMXX tokens you'll
                                    receive.</p>
                            </div>
                            <div class="feature-item">
                                <h6 class="feature-title">Approve Transaction</h6>
                                <p class="feature-dec">For stablecoins (USDT, USDC), approve contract first.</p>
                            </div>
                        </div>
                        <div class="card-bottom card-bottom-2">
                            <img alt="pepe" loading="lazy" width="350" height="500"
                                src="{{'images/pepe-03.gif' | asset_url }}" class="-mb-20">
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-xl-4 mt--40">
                <div class="scroll_top_slide"
                    style="transform: translateY(39.0166%); transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);">
                    <div class="neo-step-card step-card-item-3">
                        <div class="card-top">
                            <div class="dot"><span></span><span></span><span></span></div>
                            <span class="icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                                    class="size-6">
                                    <path fill-rule="evenodd"
                                        d="M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z"
                                        clip-rule="evenodd" />
                                </svg>
                            </span>
                        </div>
                        <div class="card-body">
                            <h3 class="card-title">Step 3</h3>
                            <p class="card-des">Confirm and Buy<span><span>Review your details, then confirm
                                        purchase.</span></span></p>
                            <div class="feature-item">
                                <h6 class="feature-title">Confirm in Wallet.</h6>
                                <p class="feature-dec">Approve the transaction in your wallet pop-up.</p>
                            </div>
                            <div class="feature-item">
                                <h6 class="feature-title">Receive Tokens</h6>
                                <p class="feature-dec">Tokens arrive directly in your wallet after successful
                                    confirmation.</p>
                            </div>
                        </div>
                        <div class="card-bottom card-bottom-3">
                            <img alt="pepe" loading="lazy" width="432" height="243"
                                src="{{'images/step-03.gif' | asset_url }}">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<script>
document.addEventListener('DOMContentLoaded', () => {
    const section = document.querySelector('.neo-how-to-buy');
    if (!section) return;

    // Initialize scroll animation
    scrollTopSlide(section);
    
    // Initialize hover effects
    addActiveOnHover(section, 'neo-step-card');

    function scrollTopSlide(section) {
        // Skip on mobile devices
        if (window.innerWidth < 768) return;

        const slides = section.querySelectorAll('.scroll_top_slide');
        if (slides.length === 0) return;

        // Initialize slides position
        slides.forEach(el => {
            el.style.transform = 'translateY(60%)';
            el.style.transition = 'transform 0.4s cubic-bezier(0.23,1,0.32,1)';
        });

        let scrollTimeout = null;
        
        function onScrollThrottled() {
            if (scrollTimeout) return;
            
            scrollTimeout = setTimeout(() => {
                scrollTimeout = null;
                
                const rect = section.getBoundingClientRect();
                const windowHeight = window.innerHeight || document.documentElement.clientHeight;
                
                // Check if section is in viewport
                if (rect.top < windowHeight && rect.bottom > 0) {
                    const sectionHeight = rect.height;
                    const scrollRatio = Math.max(0, Math.min(1, (windowHeight - rect.top) / (sectionHeight + windowHeight)));
                    
                    slides.forEach((el) => {
                        const translateY = (1 - scrollRatio) * 60;
                        el.style.transform = `translateY(${translateY}%)`;
                    });
                } else if (rect.top >= windowHeight) {
                    // Section is below viewport
                    slides.forEach(el => {
                        el.style.transform = 'translateY(60%)';
                    });
                } else if (rect.bottom <= 0) {
                    // Section is above viewport
                    slides.forEach(el => {
                        el.style.transform = 'translateY(0%)';
                    });
                }
            }, 16); // ~60fps
        }

        // Add scroll listener
        window.addEventListener('scroll', onScrollThrottled, { passive: true });
        
        // Handle window resize
        window.addEventListener('resize', () => {
            if (window.innerWidth < 768) {
                slides.forEach(el => {
                    el.style.transform = 'translateY(0%)';
                });
            } else {
                onScrollThrottled();
            }
        });

        // Initial call
        onScrollThrottled();
    }

    function addActiveOnHover(section, cardClass) {
        const cards = section.querySelectorAll(`.${cardClass}`);
        if (cards.length === 0) return;

        cards.forEach((card, index) => {
            // Add hover event listeners
            card.addEventListener('mouseenter', () => {
                // Remove active class from all cards
                cards.forEach(c => c.classList.remove('active'));
                // Add active class to hovered card
                card.classList.add('active');
            });

            // Optional: Remove active on mouse leave and restore to middle card
            card.addEventListener('mouseleave', () => {
                cards.forEach(c => c.classList.remove('active'));
                // Restore active to middle card (index 1)
                if (cards[1]) {
                    cards[1].classList.add('active');
                }
            });
        });

        // Initialize: Set middle card as active
        if (cards[1]) {
            cards[1].classList.add('active');
        }
    }
});
</script>